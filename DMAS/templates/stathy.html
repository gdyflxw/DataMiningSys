<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Xenon Boostrap Admin Panel" />
    <meta name="author" content="lixuanwen" />
    <title>商事登记与代码应用研究所</title>
    {% include "frame/Import.html" %}
</head>

<body class="page-body">
    <div class="page-container">
        {% include "frame/Sidebar.html" %}
        <div class="main-content">
            {% include "frame/Menubar.html" %}
            <div class="panel panel-default" style="height:607px">
                <div class="panel-heading">
                    <h3 class="panel-title">内外资信息统计</h3>
                    <div class="panel-options">
                        <ul class="nav nav-tabs">
                            <li class="active"><a href="#tab-1" data-toggle="tab">行业分布</a></li>
                            <li><a href="#tab-2" data-toggle="tab">大型企业增幅</a></li>
                            <li><a href="#tab-3" data-toggle="tab">内外资走势</a></li>
                        </ul>
                    </div>
                </div>
                <div class="panel-body">
                    <div class="tab-content">
                        <div class="tab-pane active" id="tab-1">
                            <form role="form" class="form-inline">
                                <div class="form-group">
                                    <label class="control-label">请输入起止日期</label>
                                </div>
                                <div class="form-group">
                                    <div class="daterange daterange-inline add-ranges" data-format="YYYY-MM-DD" data-start-date="2014-09-15" data-end-date="2015-09-15">
                                        <i class="fa-calendar"></i>
                                        <span id="statnwzhy_dr">2014-09-15 - 2015-09-15</span>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label">请选择行政区划</label>
                                </div>
                                <div class="form-group">
                                    <select class="form-control" id="sboxit-1">
                                        <option value="福田区">福田区</option>
                                        <option value="南山区">南山区</option>
                                        <option value="宝安区">宝安区</option>
                                        <option value="罗湖区">罗湖区</option>
                                        <option value="龙岗区">龙岗区</option>
                                        <option value="大鹏区">大鹏区</option>
                                        <option value="龙华区">龙华区</option>
                                        <option value="盐田区">盐田区</option>
                                        <option value="光明区">光明区</option>
                                        <option value="坪山区">坪山区</option>
                                        <option value="南山非前海">南山非前海</option>
                                        <option value="南山前海">南山前海</option>
                                        <option value="全市">全市</option>
                                    </select>
                                </div>
                                <div class="form-group pull-right">
                                    <button id="statnwzhy_btn" class="btn btn-secondary btn-single" type="button">查询</button>
                                </div>
                            </form>
                            <div id="gridContainer-1" style="padding-top:10px;height:480px"></div>
                        </div>
                        <div class="tab-pane" id="tab-2">
                            <form role="form" class="form-inline">
                                <div class="form-group">
                                    <label class="control-label">请输入起止日期</label>
                                </div>
                                <div class="form-group">
                                    <div class="daterange daterange-inline add-ranges" data-format="YYYY-MM-DD" data-start-date="2014-09-15" data-end-date="2015-09-15">
                                        <i class="fa-calendar"></i>
                                        <span id="bigentInc_dr">2014-09-15 - 2015-09-15</span>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label">请选择行政区划</label>
                                </div>
                                <div class="form-group">
                                    <select class="form-control" id="sboxit-2">
                                        <option value="福田区">福田区</option>
                                        <option value="南山区">南山区</option>
                                        <option value="宝安区">宝安区</option>
                                        <option value="罗湖区">罗湖区</option>
                                        <option value="龙岗区">龙岗区</option>
                                        <option value="大鹏区">大鹏区</option>
                                        <option value="龙华区">龙华区</option>
                                        <option value="盐田区">盐田区</option>
                                        <option value="光明区">光明区</option>
                                        <option value="坪山区">坪山区</option>
                                        <option value="南山非前海">南山非前海</option>
                                        <option value="南山前海">南山前海</option>
                                        <option value="全市">全市</option>
                                    </select>
                                </div>
                                <div class="form-group pull-right">
                                    <button id="bigentInc_btn" class="btn btn-secondary btn-single" type="button">查询</button>
                                </div>
                            </form>
                            <div id="gridContainer-2" style="padding-top:10px;height:480px"></div>
                        </div>
                        <div class="tab-pane" id="tab-3">
                            <form role="form" class="form-inline">
                                <div class="form-group">
                                    <label class="control-label">请输入起止日期</label>
                                </div>
                                <div class="form-group">
                                    <div class="daterange daterange-inline add-ranges" data-format="YYYY-MM-DD" data-start-date="2014-09-15" data-end-date="2015-09-15">
                                        <i class="fa-calendar"></i>
                                        <span id="nwzmonth_dr">2014-09-15 - 2015-09-15</span>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label">请选择行政区划</label>
                                </div>
                                <div class="form-group">
                                    <select class="form-control" id="sboxit-3">
                                        <option value="福田区">福田区</option>
                                        <option value="南山区">南山区</option>
                                        <option value="宝安区">宝安区</option>
                                        <option value="罗湖区">罗湖区</option>
                                        <option value="龙岗区">龙岗区</option>
                                        <option value="大鹏区">大鹏区</option>
                                        <option value="龙华区">龙华区</option>
                                        <option value="盐田区">盐田区</option>
                                        <option value="光明区">光明区</option>
                                        <option value="坪山区">坪山区</option>
                                        <option value="南山非前海">南山非前海</option>
                                        <option value="南山前海">南山前海</option>
                                        <option value="全市">全市</option>
                                    </select>
                                </div>
                                <div class="form-group pull-right">
                                    <button id="nwzmonth_btn" class="btn btn-secondary btn-single" type="button">查询</button>
                                </div>
                            </form>
                            <div class="row">
                                <div class="col-sm-6" style="border-right: 1px solid #dddddd;">
                                    <div id="gridContainer-3" style="padding-top:10px;height:480px"></div>
                                </div>

                                <div class="col-sm-6">
                                    <div id="chartsContainer-4" style="padding-top:10px;height:480px"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            {% include "frame/Footer.html" %}
        </div>
    </div>
    <script type="text/javascript">
    jQuery(document).ready(function($) {
        var bt = moment().subtract(12, 'month').format('YYYY-MM-DD');
        var et = moment().subtract(1, 'days').format('YYYY-MM-DD');
        setdr('statnwzhy_dr', bt, et)
        setdr('bigentInc_dr', bt, et)
        setdr('nwzmonth_dr', bt, et)
        //setdr('StatCYWZ_dr', bt, et)
        $("#sboxit-1").selectBoxIt().on('open', function() { $(this).data('selectBoxSelectBoxIt').list.perfectScrollbar(); });
        $("#sboxit-2").selectBoxIt().on('open', function() { $(this).data('selectBoxSelectBoxIt').list.perfectScrollbar(); });
        $("#sboxit-3").selectBoxIt().on('open', function() { $(this).data('selectBoxSelectBoxIt').list.perfectScrollbar(); });
        //$("#sboxit-4").selectBoxIt().on('open', function() { $(this).data('selectBoxSelectBoxIt').list.perfectScrollbar(); });
        //$("#sboxit-1").selectBoxIt().on('open', function() {$(this).data('selectBoxSelectBoxIt').list.perfectScrollbar();});
        //$("#sboxit-1").selectBoxIt().on('open', function() {$(this).data('selectBoxSelectBoxIt').list.perfectScrollbar();});
        //$("#sboxit-1").selectBoxIt().on('open', function() {$(this).data('selectBoxSelectBoxIt').list.perfectScrollbar();});
        //$("#sboxit-1").selectBoxIt().on('open', function() {$(this).data('selectBoxSelectBoxIt').list.perfectScrollbar();});
        //$("#sboxit-1").selectBoxIt().on('open', function() {$(this).data('selectBoxSelectBoxIt').list.perfectScrollbar();});
        //$("#sboxit-1").selectBoxIt().on('open', function() {$(this).data('selectBoxSelectBoxIt').list.perfectScrollbar();});
    });
    $('#statnwzhy_btn').click(function() {
        var dic = getCompDate($('#statnwzhy_dr').text().split(' - ')[0], $('#statnwzhy_dr').text().split(' - ')[1])
        dic['xzqh'] = $("#sboxit-1").parent().children("span").children("span").text()
        var p = {
            methodname: 'statnwzhy',
            parameters: JSON.stringify(dic)
        }
        var filename = dic['nowdateB'] + "到" + dic['nowdateE'] + "内外资行业统计"
        var cols = ["行业门类","企业数",{ dataField: "行业占比", format: "#.00%" },"内资企业数","外资企业数","五百万美元以上外资","一千万美元以上外资","一亿以上内资"];
        var summarys = { texts: { sum: "{0}" }, totalItems: [{ column: "行业门类", valueFormat: "合计" }, { column: "企业数", summaryType: "sum" }, { column: "行业占比", summaryType: "sum", valueFormat: "percent" },{ column: "内资企业数", summaryType: "sum" },{ column: "外资企业数", summaryType: "sum" },{ column: "五百万美元以上外资", summaryType: "sum" },{ column: "一千万美元以上外资", summaryType: "sum" },{ column: "一亿以上内资", summaryType: "sum" }] };
        show_loading_bar({
            pct: 100,
            delay: 1.3,
            finish: function(pct) { 
                var tbdata = getDataTable(p, 'gridContainer-1', filename, cols, summarys);
                hide_loading_bar();
            }
        });
    });

    $('#bigentInc_btn').click(function() {
        var dic = getCompDate($('#bigentInc_dr').text().split(' - ')[0], $('#bigentInc_dr').text().split(' - ')[1])
        dic['xzqh'] = $("#sboxit-2").parent().children("span").children("span").text()
        var p = {
            methodname: 'bigentInc',
            parameters: JSON.stringify(dic)
        }
        var filename = dic['nowdateB'] + "到" + dic['nowdateE'] + "内外资大型企业统计"

        var cols = ["项目","本期数量","环比数量","同比数量",{ dataField: "环比数量增幅", format: "#.00%" },{ dataField: "同比数量增幅", format: "#.00%" },"本期金额","环比金额","同比金额",{ dataField: "环比金额增幅", format: "#.00%" },{ dataField: "同比金额增幅", format: "#.00%" }];
        var summarys={}
        show_loading_bar({
            pct: 100,
            delay: 1.3,
            finish: function(pct) { 
                var tbdata = getDataTable(p, 'gridContainer-2', filename, cols, summarys);
                hide_loading_bar();
            }
        });
    });

    $('#nwzmonth_btn').click(function() {
        var dic = getCompDate($('#nwzmonth_dr').text().split(' - ')[0], $('#nwzmonth_dr').text().split(' - ')[1])
        dic['xzqh'] = $("#sboxit-3").parent().children("span").children("span").text()
        var p = {
            methodname: 'nwzmonth',
            parameters: JSON.stringify(dic)
        }
        var filename = dic['nowdateB'] + "到" + dic['nowdateE'] + "内外资企业月统计"

        var cols = [{dataField:"行政区划",fixed:true},{dataField:"统计月份",fixed:true},"企业总增量","企业总金额","内资企业数量",{ dataField: "内资企业数量占比", format: "#.00%" },"外资企业数量",{ dataField: "外资企业数量占比", format: "#.00%" },"内资一亿以上企业数","外资五百万美元以上企业数","内资企业资金",{ dataField: "内资企业资金占比", format: "#.00%" },"外资企业资金",{ dataField: "外资企业资金占比", format: "#.00%" }];
        var summarys={}
        show_loading_bar({
            pct: 100,
            delay: 1.3,
            finish: function(pct) { 
                var tbdata = getDataTable(p, 'gridContainer-3', filename, cols, summarys);
                spec_combCharts('chartsContainer-4',tbdata)
                hide_loading_bar();
            }
        });
    });
    </script>
</body>

</html>